<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RobinTrace: transfer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RobinTrace
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classtransfer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">transfer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transfer operation over a ray.  
 <a href="classtransfer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="transfer_8h_source.html">transfer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2a3a13d95b1091e342be98556a010a98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#a2a3a13d95b1091e342be98556a010a98">transfer</a> ()</td></tr>
<tr class="memdesc:a2a3a13d95b1091e342be98556a010a98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classtransfer.html#a2a3a13d95b1091e342be98556a010a98">More...</a><br /></td></tr>
<tr class="separator:a2a3a13d95b1091e342be98556a010a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ca7134272af4b2b36cacc7469c5b1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#af9ca7134272af4b2b36cacc7469c5b1f">transfer</a> (<a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a> _D)</td></tr>
<tr class="memdesc:af9ca7134272af4b2b36cacc7469c5b1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation initialization constructor.  <a href="classtransfer.html#af9ca7134272af4b2b36cacc7469c5b1f">More...</a><br /></td></tr>
<tr class="separator:af9ca7134272af4b2b36cacc7469c5b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec12f8702dec2a131f9e9e0847323830"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#aec12f8702dec2a131f9e9e0847323830">transfer</a> (<a class="el" href="Mat3_8h.html#a86655cf0b707ee359ac74b07f3272aa3">Mat3</a> _Bt, <a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a> _D)</td></tr>
<tr class="memdesc:aec12f8702dec2a131f9e9e0847323830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full initialization constructor.  <a href="classtransfer.html#aec12f8702dec2a131f9e9e0847323830">More...</a><br /></td></tr>
<tr class="separator:aec12f8702dec2a131f9e9e0847323830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2b38d96e03f97b6c45070bf78de41fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#ab2b38d96e03f97b6c45070bf78de41fe">apply</a> (<a class="el" href="classray.html">ray</a> &amp;r)</td></tr>
<tr class="memdesc:ab2b38d96e03f97b6c45070bf78de41fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the transfer to a ray.  <a href="classtransfer.html#ab2b38d96e03f97b6c45070bf78de41fe">More...</a><br /></td></tr>
<tr class="separator:ab2b38d96e03f97b6c45070bf78de41fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad60a58c88f652a51b4e8ee2d3d0921d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Mat3_8h.html#a86655cf0b707ee359ac74b07f3272aa3">Mat3</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#ad60a58c88f652a51b4e8ee2d3d0921d9">Bt</a></td></tr>
<tr class="memdesc:ad60a58c88f652a51b4e8ee2d3d0921d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transpose of the rotation matrix \( B \).  <a href="classtransfer.html#ad60a58c88f652a51b4e8ee2d3d0921d9">More...</a><br /></td></tr>
<tr class="separator:ad60a58c88f652a51b4e8ee2d3d0921d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4ed7cf91e483965c024a7279a378c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#a5d4ed7cf91e483965c024a7279a378c1">D</a></td></tr>
<tr class="memdesc:a5d4ed7cf91e483965c024a7279a378c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation vector \( D \).  <a href="classtransfer.html#a5d4ed7cf91e483965c024a7279a378c1">More...</a><br /></td></tr>
<tr class="separator:a5d4ed7cf91e483965c024a7279a378c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ae3c96faca93e39f04e0c7ea9fedb5aa9"><td class="memItemLeft" align="right" valign="top"><a id="ae3c96faca93e39f04e0c7ea9fedb5aa9"></a>
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtransfer.html#ae3c96faca93e39f04e0c7ea9fedb5aa9">operator&lt;&lt;</a> (std::ostream &amp;out, const <a class="el" href="classtransfer.html">transfer</a> &amp;trf)</td></tr>
<tr class="memdesc:ae3c96faca93e39f04e0c7ea9fedb5aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Printer. <br /></td></tr>
<tr class="separator:ae3c96faca93e39f04e0c7ea9fedb5aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transfer operation over a ray. </p>
<p>The transfer operation defines a new LCS to propagate the ray to. It operates a change of basis and an intersection with the newly defined local plane. Let, in a hypothetical global common coordinate system,</p><ul>
<li>LCS1 the starting LCS defined by its origin and basis vectors \( (A_1, \hat{x_1}, \hat{y_1}, \hat{z_1}) \)</li>
<li>LCS2 the new LCS defined by the transfer, \( (A_2, \hat{x_2}, \hat{y_2}, \hat{z_2}) \)</li>
</ul>
<p>The definition of LCS2 from LCS1 is done with,</p><ul>
<li>\( B \): A 3x3 rotation matrix between the basis vectors of LCS1 and LCS2.</li>
<li>\( \overrightarrow{D} \): A translation vector from LCS1 to LCS2.</li>
</ul>
<p>The coordinates of the origin and basis vectors of LCS are expressed with, </p><p class="formulaDsp">
\[ \begin{cases} A_2 &amp;= B \cdot \overrightarrow{D} \\ \hat{x_2} &amp;= B \cdot \hat{x_1} \\ \hat{y_2} &amp;= B \cdot \hat{y_1} \\ \hat{z_2} &amp;= B \cdot \hat{z_1} \end{cases} \]
</p>
<p>Which is to say, LCS2 is obtained from LCS1 by first applying the rotation \( B \) and then translating the origin by \( \overrightarrow{D} \), with \( D \) expressed in the rotated coordinates.</p>
<div class="image">
<object type="image/svg+xml" data="transfer-definition.svg" style="pointer-events: none;"></object>
</div>
 </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2a3a13d95b1091e342be98556a010a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3a13d95b1091e342be98556a010a98">&#9670;&nbsp;</a></span>transfer() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">transfer::transfer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>The defaults are:</p><ul>
<li>\( B = B^{-1} = I \), the identity matrix.</li>
<li>\( \overrightarrow{D} = 0_3 \), the zero vector.</li>
</ul>
<p>This transfer operation does not change the current LCS. </p>

</div>
</div>
<a id="af9ca7134272af4b2b36cacc7469c5b1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ca7134272af4b2b36cacc7469c5b1f">&#9670;&nbsp;</a></span>transfer() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">transfer::transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a>&#160;</td>
          <td class="paramname"><em>_D</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Translation initialization constructor. </p>
<p>The translation vector is initialized to _D, while the rotation matrix \( B \) is identity. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_D</td><td>The initial transfer translation vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aec12f8702dec2a131f9e9e0847323830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec12f8702dec2a131f9e9e0847323830">&#9670;&nbsp;</a></span>transfer() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">transfer::transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Mat3_8h.html#a86655cf0b707ee359ac74b07f3272aa3">Mat3</a>&#160;</td>
          <td class="paramname"><em>_Bt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a>&#160;</td>
          <td class="paramname"><em>_D</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Full initialization constructor. </p>
<p>The rotation matrix transpose is initialized to <code>_Bt</code>, the translation vector is initialized to <code>_D</code>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_Bt</td><td>The initial rotation matrix transpose. </td></tr>
    <tr><td class="paramname">_D</td><td>The initial translation vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab2b38d96e03f97b6c45070bf78de41fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b38d96e03f97b6c45070bf78de41fe">&#9670;&nbsp;</a></span>apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void transfer::apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classray.html">ray</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the transfer to a ray. </p>
<p>The operation is decomposed into two successive operations on the ray.</p><ul>
<li>A change of basis from LCS1 to LCS2.</li>
<li>A ray intersection with the local plane of LCS2</li>
</ul>
<p>Let the ray coordinates in LCS1, \( (P_1, \overrightarrow{V_1}) \). We first operate the change of basis, which gives us ray coordinates \( (P_2, \overrightarrow{V_2}) \).</p>
<p class="formulaDsp">
\[ \begin{cases} P_2 &amp;= \begin{bmatrix} x_2 \\ y_2 \\ z_2 \end{bmatrix} = B^{-1} \cdot P_1 - \overrightarrow{D} \\ \overrightarrow{V_2} &amp;= \begin{bmatrix} l_2 \\ m_2 \\ n_2 \end{bmatrix} = B^{-1} \cdot \overrightarrow{V_1} \end{cases} \]
</p>
<p>\( n_2 = 0 \) is an error case, since the ray is parallel to the LCS2 local plane.</p>
<p>We then operate the intersection of the ray with the LCS2 local plane, obtaining \( (P_3, \overrightarrow{V_3}) \).</p>
<p class="formulaDsp">
\[ \begin{cases} \overrightarrow{V_3} = \overrightarrow{V_2} \\ t = - \frac{z_2}{n_2} \\ P_3 = \begin{bmatrix} x_2 + t \cdot l_2 \\ y_2 + t \cdot m_2 \\ 0 \end{bmatrix} \end{cases} \]
</p>
<div class="image">
<object type="image/svg+xml" data="transfer-operation.svg" style="pointer-events: none;"></object>
</div>
 <div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtransfer_ab2b38d96e03f97b6c45070bf78de41fe_icgraph.svg" width="327" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad60a58c88f652a51b4e8ee2d3d0921d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60a58c88f652a51b4e8ee2d3d0921d9">&#9670;&nbsp;</a></span>Bt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Mat3_8h.html#a86655cf0b707ee359ac74b07f3272aa3">Mat3</a> transfer::Bt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transpose of the rotation matrix \( B \). </p>
<p>Note that since rotation matrices are orthogonal, we have \( B^{-1} = B^\top \). </p>

</div>
</div>
<a id="a5d4ed7cf91e483965c024a7279a378c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d4ed7cf91e483965c024a7279a378c1">&#9670;&nbsp;</a></span>D</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Vec3_8h.html#a8daa2fe909f826a828953371253c9bc0">Vec3</a> transfer::D</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Translation vector \( D \). </p>
<p>Note the translation from LCS1 to LCS2 is applied in the rotated coordinates. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/poaky/src/transfer/<a class="el" href="transfer_8h_source.html">transfer.h</a></li>
<li>src/poaky/src/transfer/transfer.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
